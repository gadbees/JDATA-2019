# 京东JDATA算法大赛2019-用户对品类下店铺的购买预测

## 赛题介绍
比赛网址：[JDATA2019-用户对品类下店铺的购买预测](https://jdata.jd.com/html/detail.html?id=8)


### 赛题任务
本赛题提供来自用户、商家、商品等多方面数据信息，包括商家和商品自身的内容信息、评论信息以及用户与之丰富的互动行为。参赛队伍需要通过数据挖掘技术和机器学习算法，构建用户购买商家中相关品类的预测模型，输出用户和店铺、品类的匹配结果，为精准营销提供高质量的目标群体。同时，希望参赛队伍通过本次比赛，挖掘数据背后潜在的意义，为电商生态平台的商家、用户提供多方共赢的智能解决方案。<br> 
即：对于训练集中出现的每一个用户，参赛者的模型需要预测该用户在未来7天内对`某个目标品类`下`某个店铺`的购买意向

### 赛题数据
1. 训练数据<br> 
    提供`2018-02-01`到`2018-04-15`用户集合U中的用户，对商品集合S中部分商品的行为、评价、用户数据。<br> 
2. 预测数据<br> 
    提供`2018-04-16`到`2018-04-22`预测用户U对哪些品类和店铺有购买，用户对品类下的店铺只会购买一次。<br> 
3. 数据表说明<br> 
![](https://img30.360buyimg.com/img/jfs/t1/40477/10/154/22847/5cc0f9d5Ea5384d90/47fa7d3c9e716bdc.png)
### 评测
（1）该用户`2018-04-16`到`2018-04-22`是否对品类有购买，提交的结果文件中仅包含预测为下单的用户和品类（预测为未下单的用户和品类无须在结果中出现）。评测时将对提交结果中重复的“用户-品类”做排重处理，若预测正确，则评测算法中置label=1，不正确label=0。 <br> 
（2）如果用户对品类有购买，还需要预测对该品类下哪个店铺有购买，若店铺预测正确，则评测算法中置pred=1，不正确pred=0。 <br> 
对于参赛者提交的结果文件，按如下公式计算得分：`score=0.4F11+0.6F12`。此处的F1值定义为：<br> 
![](https://img30.360buyimg.com/img/jfs/t1/31376/19/11155/9346/5cb3f143E00446b31/4c9c697ff32863ba.png) <br> 
其中：Precise为准确率，Recall为召回率； F11 是label=1或0的F1值，F12 是pred=1或0的F1值。

## 代码思路
时间滑窗法+lightgbm+xgboost+catboost<br> 
根据滑窗法，利用一周的时间作为预测部分，将2周/3周时间的用户作为训练部分，并且将4周/6周的用户和商铺、商品之间的交互行为进行特征提取。<br>
下图所示的为3周时间的用户作为训练部分，6周的用户和商铺、商品之间的交互行为进行特征提取的表格示意图
![](https://github.com/lcxanhui/JDATA-2019/blob/master/picture/time_series.PNG)
![](https://github.com/lcxanhui/JDATA-2019/blob/master/picture/huachuang.PNG)
* A榜线上0.060<br> 
* B榜线上0.060<br> 

## 代码环境

## 参考资料
* 官方思路解答: [ 知乎：JData大数据比赛第三届非官方答疑贴](https://zhuanlan.zhihu.com/p/64503113)
* 比赛参考代码: [【科普建模】JDATA3 用户对品类下店铺的购买预测](https://mp.weixin.qq.com/s?__biz=Mzg2MTEwNDQxNQ==&mid=2247483702&idx=1&sn=df621247b4790471063ddbeb15ad81c3&chksm=ce1d7146f96af85001e47999cb447d86820b082570c39de0c4ddc18dcba0b233697d5ef2e0ae&mpshare=1&scene=23&srcid=#rd)
